<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-how-to-guides/standalone-executables" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Standalone Executables | Evo.lua</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://evo-lua.github.io/docs/how-to-guides/standalone-executables"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Standalone Executables | Evo.lua"><meta data-rh="true" name="description" content="Learn how to package your Lua apps for distribution to end-users"><meta data-rh="true" property="og:description" content="Learn how to package your Lua apps for distribution to end-users"><link data-rh="true" rel="icon" href="/img/caterpillar.png"><link data-rh="true" rel="canonical" href="https://evo-lua.github.io/docs/how-to-guides/standalone-executables"><link data-rh="true" rel="alternate" href="https://evo-lua.github.io/docs/how-to-guides/standalone-executables" hreflang="en"><link data-rh="true" rel="alternate" href="https://evo-lua.github.io/docs/how-to-guides/standalone-executables" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.fde9ccc8.css">
<link rel="preload" href="/assets/js/runtime~main.1c0fc164.js" as="script">
<link rel="preload" href="/assets/js/main.f5c2afea.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/caterpillar.png" alt="Evo.lua Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/caterpillar.png" alt="Evo.lua Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Evo.lua</b></a><a class="navbar__item navbar__link" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/docs/category/api">API Overview</a><a class="navbar__item navbar__link" href="/docs/security-policy">Security Policy</a><a class="navbar__item navbar__link" href="/docs/contributing">Contributing</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/evo-lua" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Documentation Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-to-guides/building-from-source">Building from Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-to-guides/integrations-and-tooling">Integrations and Tooling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/how-to-guides/standalone-executables">Standalone Executables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-to-guides/unit-testing">Unit Testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/background-information">Background Information</a><button aria-label="Toggle the collapsible sidebar category &#x27;Background Information&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/references">References</a><button aria-label="Toggle the collapsible sidebar category &#x27;References&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/security-policy">Security Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/how-to-guides"><span itemprop="name">How-to Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Standalone Executables</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Standalone Executables</h1><p>Learn how to package your Lua apps for distribution to end-users</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>Since Lua is an interpreted scripting language, it doesn&#x27;t allow distributing binary releases on its own. However, there&#x27;s a workaround:</p><p>Instead of compiling Lua files to binary objects, you can simply distribute the scripts as text files (or bytecode objects). However: Since end-users likely won&#x27;t have a Lua interpreter available, you must ship one alongside the application&#x27;s script files. This is the approach that Evo takes, but the scripts are bundled into a ZIP archive and embedded into the executable you distribute to the user&#x27;s system.</p><p>The interpreter can then detect the presence of a ZIP archive inside its own executable and read data from it as needed. To run your application, the interpreter will extract the files at runtime and load them &quot;behind the scenes&quot;, invisible to the user. The concept may seem a bit strange, but it works because ZIP files can also be executables. It&#x27;s similar to Java&#x27;s JAR files or the Windows installers of old.</p><p>This page describes the options that Evo supports out of the box for creating these executable ZIP files, and limitations to the approach.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-standalone-apps">Building Standalone Apps<a href="#building-standalone-apps" class="hash-link" aria-label="Direct link to Building Standalone Apps" title="Direct link to Building Standalone Apps">​</a></h2><p>There&#x27;s only two steps needed to create a standalone executable:</p><ol><li>Prepare a directory that contains only the files to be distributed in a ZIP archive</li><li>Run <code>evo build</code> in this directory (or provide the path to it as an additional argument)</li></ol><p>You should see a summary with some technical details about the executable that was built:</p><p><img loading="lazy" alt="Console output displayed when successfully building a standalone app via &amp;#39;evo build&amp;#39; command" src="/assets/images/build-standalone-app-5af6645ed9a3e31148b89804a30c8d48.png" width="676" height="183" class="img_CujE"></p><p>After the process has completed, you will notice the presence of two build artifacts:</p><ol><li>The standalone executable itself (here called <code>hello-world-app.exe</code>), which end-users should be able to run on their system</li><li>A ZIP archive that contains all the bundled files (here called <code>hello-world-app.zip</code>) - look inside to see what you would ship</li></ol><p>The executable is all you need to distribute; it includes the ZIP archive alongside the Evo runtime used to build it (and a signature).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="loading-bundled-files">Loading Bundled Files<a href="#loading-bundled-files" class="hash-link" aria-label="Direct link to Loading Bundled Files" title="Direct link to Loading Bundled Files">​</a></h2><p>You&#x27;ll need to create a &quot;loader&quot; called <code>main.lua</code>, which initializes the rest of your application. Place it in the directory that you package. Evo will extract the entry point, <code>main.lua</code>, and run it when it detects a self-contained app. Your entry point can <code>require</code> modules from within the virtual file system just like any other file:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- main.lua</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> someModule </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;someModule&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">dump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">someModule</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> someOtherModule </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;subdirectory.someOtherModule&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">dump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">someOtherModule</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above example, Evo will load both files from the VFS, if they exist, or use the default <code>require</code> behavior otherwise:</p><ol><li>Whenever a module exists in the VFS and on disk, the VFS takes priority (for security and performance reasons)</li><li>All <code>.</code> (dots) in the path names are internally replaced by <code>/</code> to cleanly map to the VFS paths</li></ol><p>This change isn&#x27;t disruptive; all Evo does is add a custom <a href="https://www.lua.org/manual/5.2/manual.html#pdf-package.searchers" target="_blank" rel="noopener noreferrer">searcher</a> that looks into the VFS first when it dectects it is running a standalone executable. You can still add your own searchers to load different versions, or remove them.</p><p>The path resolution follows all the standard rules. It can be configured with <a href="https://www.lua.org/manual/5.1/manual.html#pdf-package.path" target="_blank" rel="noopener noreferrer">package.cpath</a> and <code>LUA_PATH</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lua-c-api-modules">Lua C-API Modules<a href="#lua-c-api-modules" class="hash-link" aria-label="Direct link to Lua C-API Modules" title="Direct link to Lua C-API Modules">​</a></h3><p>Because this mechanism makes use of Lua&#x27;s <a href="https://www.lua.org/manual/5.1/manual.html#pdf-require" target="_blank" rel="noopener noreferrer"><code>require</code></a> system, you can only load <a href="https://www.lua.org/manual/5.1/manual.html#3" target="_blank" rel="noopener noreferrer">Lua C modules</a> with it. In order to do so, you should bundle your application with a compatible version of the C module and use it like you would any other module available on the user&#x27;s system. The <code>vfs.searcher</code> will discover it and let Lua handle the rest.</p><p>The path resolution follows all the standard rules. It can be configured with <a href="https://www.lua.org/manual/5.1/manual.html#pdf-package.cpath" target="_blank" rel="noopener noreferrer">package.cpath</a> and <code>LUA_CPATH</code>.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Although many Lua C modules are available and can be used with <code>require</code>, this has a significant impact on performance and often incurs additional maintenance costs. Using the C API is of course supported, but not the recommended approach to loading native libraries in this runtime. If you do want to use them, you must make sure they&#x27;re built for LuaJIT, which is based on Lua 5.1 and not compatible with more recent C API versions.</p></div></div><p>There&#x27;s another way to get access to C code that you want to ship with your application, described below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shared-libraries-and-the-ffi">Shared Libraries and the FFI<a href="#shared-libraries-and-the-ffi" class="hash-link" aria-label="Direct link to Shared Libraries and the FFI" title="Direct link to Shared Libraries and the FFI">​</a></h3><p>Evo allows you to use shared libraries (<code>.dll</code>, <code>.so</code>, <code>.dylib</code> files) using LuaJIT&#x27;s <a href="https://luajit.org/ext_ffi_api.html" target="_blank" rel="noopener noreferrer">foreign function interface</a>. This introduces potentially unsafe code paths, but has significant performance benefits. It&#x27;s also a lot easier to create FFI bindings; no glue code is needed beyond the definitions for types and function signatures (called &quot;cdefs&quot;).</p><p>The <code>vfs</code> library supports loading these kinds of modules even from within self-contained app bundles:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">vfs-dlopen-example.lua</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> ffi </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ffi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> uv </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;uv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> vfs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;vfs&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- When run from a LUAZIP app, the cache is already populated with the current app itself</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Otherwise, you can use vfs.decode to load the app bundle here - but it&#x27;ll be much slower</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> zipApp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cachedAppBundles</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">uv</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">exepath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- For brevity&#x27;s sake, export only one function. This could easily cover the entire library interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> cdefs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">[[</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    const char* zlibVersion(void);</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">]]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">cdef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cdefs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Loading may fail for various reasons, so that vfs.dlopen returns a failure tuple (nil, errorMessage)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Given the right paths, this will work when running the script from disk and also when bundled later</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> sharedLibraryPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;zlib.so&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- ... or .dll, .dylib (platform-specific)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> zlibShared </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dlopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">zipApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sharedLibraryPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> ffi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sharedLibraryPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- If loading did succeed, all of the previously defined functions can now be used from Lua</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> versionString </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ffi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">zlibShared</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">zlibVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Successfully loaded zlib version %s from the LUAZIP bundle!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> versionString</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There is no path resolution or magic search prefixes to configure. The <code>vfs.dlopen</code> searcher simply browses the executable&#x27;s archive for a file with the given path, which is relative to the root directory. It then extracts the shared object file and uses <code>ffi.load</code>, which will invoke the operating system&#x27;s facilities for loading shared libraries.</p><p>You can use <code>vfs.dlname</code> to get some portability, which is used by default when no file extension was detected.</p><p>To see what&#x27;s inside the archive, use the <code>miniz</code> or <code>vfs</code> libraries. The system is designed to be transparent.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="native-look-and-feel">Native Look and Feel<a href="#native-look-and-feel" class="hash-link" aria-label="Direct link to Native Look and Feel" title="Direct link to Native Look and Feel">​</a></h2><p>You may want to perform cosmetic surgery to provide a better user experience, such as setting an app icon or hiding the console window. Evo currently doesn&#x27;t provide any tools to help with this part of the process, though it&#x27;s something to consider for the future.</p><p>Since icons are always platform-specific, you&#x27;ll need to use third-party tools (e.g., <code>wine</code> has some for Windows, or Apple&#x27;s icon utilities).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="limitations">Limitations<a href="#limitations" class="hash-link" aria-label="Direct link to Limitations" title="Direct link to Limitations">​</a></h2><p>The nature of interpreted languages puts some limits on what you can do. The following might help you decide if this works for you.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="binary-size">Binary Size<a href="#binary-size" class="hash-link" aria-label="Direct link to Binary Size" title="Direct link to Binary Size">​</a></h3><p>If you&#x27;re shipping a full Lua runtime alongside your application, this will clearly increase the total binary size of the artifacts you have to distribute. While Lua interpreters are generally tiny, as a full-fledged runtime environment Evo is a bit bulkier, and you&#x27;ll be effectively adding all of the contained libraries regardless of whether you actually use them. Especially for small programs this could be significant.</p><p>The good news is that it&#x27;s not that big compared to other options, and also you could ship a leaner, trimmed-down version of Evo.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="obfuscation">Obfuscation<a href="#obfuscation" class="hash-link" aria-label="Direct link to Obfuscation" title="Direct link to Obfuscation">​</a></h3><p>While this provides very limited security against tampering or reverse engineering efforts, publishing Lua code (or even bytecode) very clearly makes it relatively easy to access a more readable version of the source code. This generally won&#x27;t be an issue for open source projects, and even many proprietary applications (as few users would bother to read the source code even if you waved it in their face).</p><p>For commercial use cases, however, you may want to consider moving business-critical parts into a native DLL/SO file and ship that.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-dependencies">Runtime Dependencies<a href="#runtime-dependencies" class="hash-link" aria-label="Direct link to Runtime Dependencies" title="Direct link to Runtime Dependencies">​</a></h3><p>Although Evo comes with quite a few &quot;batteries&quot; that you don&#x27;t need to manually distribute, the builtin APIs don&#x27;t cover every use case.</p><p>Complex programs often require the help of advanced libraries, which are usually bundled alongside the app (as DLL or shared object files). While LuaJIT can easily access these, you will still need to include them. Scripts inside a standalone executable still need to load libraries at runtime. This is what other interpreted languages do, as well.</p><p>Unfortunately, shipping binaries to different Linux systems may be troublesome. But at least users there won&#x27;t necessarily expect it. You can call <code>ffi.load</code> with just the library name and rely on system libraries installed by the user, which works on any modern distribution with a built-in package manager (such as <code>apt</code> or <code>pacman</code>).</p><p>Both the libraries and the runtime executable included in a self-contained application bundle must be compatible with the architecture of the system that&#x27;s ultimately meant to run them. Cross-compilation is not supported.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="licensing-issues">Licensing Issues<a href="#licensing-issues" class="hash-link" aria-label="Direct link to Licensing Issues" title="Direct link to Licensing Issues">​</a></h3><p>Because you&#x27;re providing a complete runtime (including lots of third-party code) alongside the program, certain licensing terms must be adhered to. In the case of Lua, LuaJIT, and indeed all of Evo this should however be unproblematic. All of them use permissive open-source licenses that should play nice, but it&#x27;s best to conduct a proper legal review to ensure compliance won&#x27;t cause any problems.</p><p>For open-source projects, there obviously won&#x27;t be any issues. But it&#x27;s still good practice to review your dependencies and their licenses.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alternatives">Alternatives<a href="#alternatives" class="hash-link" aria-label="Direct link to Alternatives" title="Direct link to Alternatives">​</a></h2><p>If the above limitations are making the &quot;combined ZIP executable&quot; approach untenable, you could consider some other options:</p><ul><li>Using an installer (such as MSI or DMG) to distribute files to the end user would give you more fine-grained control</li><li>Compiling a binary &quot;addon&quot; (DLL/SO) and loading it with LuaJIT&#x27;s foreign function interface can be a viable alternative</li><li>Writing the application in a compiled language altogether and distributing binary artifacts only would be the last resort</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/evo-lua/evo-lua.github.io/edit/main/docs/how-to-guides/standalone-executables.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/how-to-guides/integrations-and-tooling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Integrations and Tooling</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/how-to-guides/unit-testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Unit Testing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#building-standalone-apps" class="table-of-contents__link toc-highlight">Building Standalone Apps</a></li><li><a href="#loading-bundled-files" class="table-of-contents__link toc-highlight">Loading Bundled Files</a><ul><li><a href="#lua-c-api-modules" class="table-of-contents__link toc-highlight">Lua C-API Modules</a></li><li><a href="#shared-libraries-and-the-ffi" class="table-of-contents__link toc-highlight">Shared Libraries and the FFI</a></li></ul></li><li><a href="#native-look-and-feel" class="table-of-contents__link toc-highlight">Native Look and Feel</a></li><li><a href="#limitations" class="table-of-contents__link toc-highlight">Limitations</a><ul><li><a href="#binary-size" class="table-of-contents__link toc-highlight">Binary Size</a></li><li><a href="#obfuscation" class="table-of-contents__link toc-highlight">Obfuscation</a></li><li><a href="#runtime-dependencies" class="table-of-contents__link toc-highlight">Runtime Dependencies</a></li><li><a href="#licensing-issues" class="table-of-contents__link toc-highlight">Licensing Issues</a></li></ul></li><li><a href="#alternatives" class="table-of-contents__link toc-highlight">Alternatives</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021-2025 · Evo.lua authors and contributors</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1c0fc164.js"></script>
<script src="/assets/js/main.f5c2afea.js"></script>
</body>
</html>