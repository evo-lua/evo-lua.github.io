<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-getting-started/core-concepts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Overview: Core Concepts | Evo.lua</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://evo-lua.github.io/docs/getting-started/core-concepts"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Overview: Core Concepts | Evo.lua"><meta data-rh="true" name="description" content="Discover the fundamental concepts that differentiate Evo from Lua(JIT)"><meta data-rh="true" property="og:description" content="Discover the fundamental concepts that differentiate Evo from Lua(JIT)"><link data-rh="true" rel="icon" href="/img/caterpillar.png"><link data-rh="true" rel="canonical" href="https://evo-lua.github.io/docs/getting-started/core-concepts"><link data-rh="true" rel="alternate" href="https://evo-lua.github.io/docs/getting-started/core-concepts" hreflang="en"><link data-rh="true" rel="alternate" href="https://evo-lua.github.io/docs/getting-started/core-concepts" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.fde9ccc8.css">
<link rel="preload" href="/assets/js/runtime~main.1c0fc164.js" as="script">
<link rel="preload" href="/assets/js/main.f5c2afea.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/caterpillar.png" alt="Evo.lua Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/caterpillar.png" alt="Evo.lua Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Evo.lua</b></a><a class="navbar__item navbar__link" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/docs/category/api">API Overview</a><a class="navbar__item navbar__link" href="/docs/security-policy">Security Policy</a><a class="navbar__item navbar__link" href="/docs/contributing">Contributing</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/evo-lua" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Documentation Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/evo-in-a-nutshell">Introduction: Evo in a Nutshell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/installation">Setup: Installation and Usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started/core-concepts">Overview: Core Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/layered-architecture">Exploring the Evo.lua API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/background-information">Background Information</a><button aria-label="Toggle the collapsible sidebar category &#x27;Background Information&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/references">References</a><button aria-label="Toggle the collapsible sidebar category &#x27;References&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/security-policy">Security Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Overview: Core Concepts</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Overview: Core Concepts</h1><p>Discover the fundamental concepts that differentiate Evo from Lua(JIT)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><p>This introduction assumes you&#x27;ve read through both the <a href="https://www.lua.org/pil/" target="_blank" rel="noopener noreferrer">Lua</a> and <a href="https://luajit.org" target="_blank" rel="noopener noreferrer">LuaJIT</a> docs and are somewhat familiar with Lua&#x27;s <a href="https://en.wikipedia.org/wiki/Lua_(programming_language)#Features" target="_blank" rel="noopener noreferrer">core features</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="topics-covered">Topics Covered<a href="#topics-covered" class="hash-link" aria-label="Direct link to Topics Covered" title="Direct link to Topics Covered">​</a></h2><p>First, we&#x27;ll start with a general overview of how Evo extends the most commonly-used Lua runtimes:</p><ul><li>Differences between the official (&quot;PUC&quot;) Lua interpreter and LuaJIT</li><li>Differences between the various Lua versions</li><li>Interaction between Lua and native (C/C++) libraries</li><li>What Evo&#x27;s standard libraries bring to the table</li></ul><p>We&#x27;ll then take a brief look at the most important &quot;new&quot; concept that you&#x27;ll need to be aware of when using Evo - the event loop:</p><ul><li>Asynchronous I/O and the event loop</li><li>Events and callback handlers</li><li>Multithreading/coroutines and the event loop</li></ul><p>If you&#x27;re already familiar with the above, (e.g., from working with NodeJS, Luvit, or other asynchronous runtimes), feel free to skip this.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lua-runtime-features">Lua Runtime Features<a href="#lua-runtime-features" class="hash-link" aria-label="Direct link to Lua Runtime Features" title="Direct link to Lua Runtime Features">​</a></h2><p>First, let&#x27;s delve into what using Evo as your runtime for Lua scripts means in practice, compared to other options.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="puc-lua-and-the-luajit-compiler">PUC Lua and the LuaJIT Compiler<a href="#puc-lua-and-the-luajit-compiler" class="hash-link" aria-label="Direct link to PUC Lua and the LuaJIT Compiler" title="Direct link to PUC Lua and the LuaJIT Compiler">​</a></h3><p>Lua (the programming language) was created by a team at <a href="https://en.wikipedia.org/wiki/Pontifical_Catholic_University_of_Rio_de_Janeiro" target="_blank" rel="noopener noreferrer">PUC</a>, who also developed and maintain the &quot;standard&quot; <code>lua</code> interpreter. While this is a relatively fast interpreter, as far as interpreted languages go, there is a secondary (independent) re-implementation called <a href="https://luajit.org/luajit.html" target="_blank" rel="noopener noreferrer">LuaJIT</a> that focuses on performance and includes a <a href="https://en.wikipedia.org/wiki/Just-in-time_compilation" target="_blank" rel="noopener noreferrer">Just-In-Time-Compiler</a>, a <a href="https://luajit.org/ext_ffi.html" target="_blank" rel="noopener noreferrer">low-level interface to interact with C libraries</a>, and more.</p><p>Language-wise, both variants are largely compatible (for caveats, see the next paragraph). But there are some key differences:</p><ul><li>LuaJIT can run in both optimized (&quot;jitted&quot;) mode as well as in a much slower &quot;interpreter&quot; mode</li><li>Interfacing with C libraries is much easier (and faster) when using LuaJIT&#x27;s foreign function interface</li></ul><p>You don&#x27;t really have to worry about these features if you don&#x27;t have much experience with Lua, but remember that they exist.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lua-versions-and-interoperability">Lua Versions and Interoperability<a href="#lua-versions-and-interoperability" class="hash-link" aria-label="Direct link to Lua Versions and Interoperability" title="Direct link to Lua Versions and Interoperability">​</a></h3><p>There are multiple versions of the Lua programming language; the most widely-used ones are probably 5.1 and 5.4.</p><p>The Lua team continues developing the language and occasionally releases new versions. However, LuaJIT is based on Lua 5.1. It offers only a selection of 5.2 features, and none that were introduced in later versions. Since Evo embeds LuaJIT, it too uses Lua 5.1 (and parts of 5.2). Due to the minimalism of Lua this isn&#x27;t usually a problem, but it&#x27;s worth keeping in mind as there are certain incompatibilities.</p><p>When in doubt, stick to the <a href="https://www.lua.org/manual/5.1/manual.html" target="_blank" rel="noopener noreferrer">reference manual</a> for Lua 5.1. As for LuaJIT, see the list of supported 5.2 features and other extensions <a href="https://luajit.org/extensions.html" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="foreign-function-interface">Foreign Function Interface<a href="#foreign-function-interface" class="hash-link" aria-label="Direct link to Foreign Function Interface" title="Direct link to Foreign Function Interface">​</a></h3><p>Because Lua is designed to be lightweight and easy to embed, it doesn&#x27;t have a large standard library. As a developer, you&#x27;re generally expected to &quot;bring your own standard libraries&quot; if needed. This (usually) means that you&#x27;d be using native C or C++ libraries and call functions inside them from Lua, using its <a href="https://www.lua.org/pil/24.html" target="_blank" rel="noopener noreferrer">C API</a> and custom &quot;bindings&quot; - that is, glue code to interface between Lua and C.</p><p>This process is frequently a lot of work and difficult to get right for beginners (who aren&#x27;t C programmers). It&#x27;s also not without overhead. Thankfully, LuaJIT&#x27;s <a href="https://luajit.org/ext_ffi.html" target="_blank" rel="noopener noreferrer">Foreign Function Interface (FFI)</a> solves both of these problems, though knowledge in C and low-level concepts is still required. Alongside the much-improved performance, this is one of the reasons Evo uses LuaJIT (and not PUC-Lua).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="extended-standard-library">Extended Standard Library<a href="#extended-standard-library" class="hash-link" aria-label="Direct link to Extended Standard Library" title="Direct link to Extended Standard Library">​</a></h3><p>The last piece of the puzzle is still missing: It&#x27;s the aforementioned (lack of) standard libraries. While a reasonable design decision on paper, the lack of easy-to-use libraries for common programming tasks can make it tricky to write applications that do what they need to in Lua. Most of the time, this problem is solved by whoever is making the application implementing their own Lua/C environment.</p><p>Widely-known examples following this methodology are Blizzard&#x27;s <a href="https://wowpedia.fandom.com/wiki/World_of_Warcraft_API" target="_blank" rel="noopener noreferrer">World of Warcraft API</a>, ROBLOX, and <a href="https://neovim.io/doc/user/api.html" target="_blank" rel="noopener noreferrer">neovim</a>. Evo similarly comes with a set of general-purpose libraries, written in C++ and Lua. It handles all the complexity of integrating third-party C/C++ code and exposing it to scripts, while providing easy-to-use high-level interfaces alongside the more low-level APIs for advanced &quot;super users&quot;.</p><p>The above means that, when writing Lua applications using Evo as your runtime, you can use all of the following:</p><ul><li>Lua 5.1 standard library (<code>string</code>, <code>table</code>, <code>debug</code>, <code>coroutine</code>, etc.)</li><li>LuaJIT extensions (`<code>ffi</code>, <code>string.buffer</code>, <code>jit</code>)</li><li>Any of the Lua libraries that are embedded in the <code>evo</code> runtime</li><li>Any of the C++ library bindings that are embedded in the <code>evo</code> runtime</li><li>Any C library you bring and load yourself (e.g, as a precompiled DLL or .so file)</li></ul><p>Of course not all possible libraries are included, so you might still have to write your own. But getting started will likely be much faster.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-execution-model">Asynchronous Execution Model<a href="#asynchronous-execution-model" class="hash-link" aria-label="Direct link to Asynchronous Execution Model" title="Direct link to Asynchronous Execution Model">​</a></h2><p>Let&#x27;s now explore the biggest conceptual difference between Evo and a standalone Lua(JIT) interpreter.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enter-the-event-loop">Enter the Event Loop<a href="#enter-the-event-loop" class="hash-link" aria-label="Direct link to Enter the Event Loop" title="Direct link to Enter the Event Loop">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>If you want a simple introduction to asynchronicity, give <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing" target="_blank" rel="noopener noreferrer">this MDN article</a> a try. It&#x27;s for JavaScript, but the concepts are the same.</p></div></div><p>Evo is designed for <a href="https://en.wikipedia.org/wiki/Asynchrony_(computer_programming)" target="_blank" rel="noopener noreferrer">asynchronous programming</a>, which allows you to perform multiple tasks concurrently without blocking the main execution thread. This is achieved using an event loop, which schedules and manages I/O operations and other tasks, running them when they&#x27;re ready to execute. This approach is identical to that used by other runtimes, and it uses the exact same mechanism as <a href="https://nodejs.org/en/docs/guides/blocking-vs-non-blocking" target="_blank" rel="noopener noreferrer">NodeJS</a> - in fact, it uses the <a href="https://libuv.org/" target="_blank" rel="noopener noreferrer">exact same underlying library</a> to implement this functionality via <a href="https://github.com/luvit/luv" target="_blank" rel="noopener noreferrer">Lua bindings</a> to its API.</p><p>In contrast to synchronous or blocking code, where the execution waits for a task to complete before moving to the next one, asynchronous code can continue executing other tasks while waiting for the completion of a long-running operation. The flipside of this is that it can be more difficult to write, understand, and debug as it frequently involves callbacks, events, or a similar mechanism.</p><p>This overall design completely changes how Lua programs are executed in the background, at least those that use the asynchronous features included with the runtime. The standard <a href="https://github.com/luvit/luv" target="_blank" rel="noopener noreferrer">Lua</a> libraries are synchronous and you can decide for yourself when, where, and to what extent you rely on non-blocking code. Blocking generally inhibits scalability as no other work can complete, but it&#x27;s still available.</p><p>By default, most code will still be blocking. That&#x27;s no cause for concern, as only long-running tasks benefit from offloading.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="events-and-callbacks">Events and Callbacks<a href="#events-and-callbacks" class="hash-link" aria-label="Direct link to Events and Callbacks" title="Direct link to Events and Callbacks">​</a></h3><p>At the lowest level, there&#x27;s always some sort of callback (or interrupt) mechanism to notify applications of completion events. A &quot;callback&quot; is really just a function that will be called when the given event occurs, such as &quot;your file has been read&quot; or &quot;the client sent some data&quot;. They&#x27;re ubiquitous in languages like JavaScript that are designed to run in an asynchronous environment, but not usually seen in standard Lua. However, in Evo they are also used and there is no &quot;good&quot; way around them (but more on that later).</p><p>To improve the usability of the resulting asynchronous code, Evo uses &quot;events&quot; directly to abstract callbacks where possible. So instead of passing around callback functions everywhere, there can be event handlers that the runtime calls with specified parameters, allowing your program to handle the asynchronous task as needed. Whenever you see something like this, that&#x27;s an event handler:</p><div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">HttpServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">HTTP_REQUEST_FINISHED</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">-- Event handling code goes here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here&#x27;s what you need to know about event handlers in Evo:</p><ul><li>The <a href="/docs/category/api/">API documentation</a> always contains a list of events where they are relevant, so make sure to check there first</li><li>Events are written in <code>ALL_CAPITAL_LETTERS</code>, and each corresponding event handler function should use the same name</li><li>There are default event handlers which usually do nothing, except print some debug information (to notify you of their presence)</li><li>In order to implement an event handler, you just set a function with the given event&#x27;s name and override the default handler</li><li>Each event handler receives a <code>string</code> containing the event name, and a payload <code>table</code> as its arguments when it is called</li></ul><p>The exact contents of the payload table depend on the event used. Native (C++) events are internally translated to this format.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="threads-and-coroutines">Threads and Coroutines<a href="#threads-and-coroutines" class="hash-link" aria-label="Direct link to Threads and Coroutines" title="Direct link to Threads and Coroutines">​</a></h3><p>While events do help in many simple cases, they aren&#x27;t going to make complex sequences of asynchronous code more readable.</p><p>In order to deal with programs that require this, there are two options. You could spawn separate <a href="https://en.wikipedia.org/wiki/Thread_(computing)" target="_blank" rel="noopener noreferrer">threads</a> and have them execute in parallel, then eventually process the final result in the main program. Alternatively, you can switch between the different asynchronous portions as needed until all of them have completed. To achieve this in Evo, you can use <a href="https://github.com/luvit/luv/blob/master/docs.md#threading-and-synchronization-utilities" target="_blank" rel="noopener noreferrer">libuv threads</a> and <a href="https://www.lua.org/pil/9.4.html" target="_blank" rel="noopener noreferrer">Lua coroutines</a>, respectively.</p><p>But beware - the asynchronous nature of the event loop can cause some unforeseen interactions when using threads and coroutines:</p><ul><li>The runtime is strictly single-threaded, so there&#x27;s no way to share the Lua environment with other threads</li><li>Asynchronous tasks might be prevented from completing if you spawn more threads than are available in the libuv <a href="http://docs.libuv.org/en/v1.x/threadpool.html" target="_blank" rel="noopener noreferrer">thread pool</a></li><li>You can <a href="https://www.lua.org/manual/5.1/manual.html#pdf-coroutine.yield" target="_blank" rel="noopener noreferrer">yield</a> from a coroutine inside the main thread, but you can&#x27;t yield from the main thread itself to return to the event loop</li></ul><p>For most simple Lua programs none of that will make a difference. Just keep in mind that special care is needed in complex scenarios.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/evo-lua/evo-lua.github.io/edit/main/docs/getting-started/core-concepts.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/getting-started/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Setup: Installation and Usage</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/getting-started/layered-architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Exploring the Evo.lua API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#topics-covered" class="table-of-contents__link toc-highlight">Topics Covered</a></li><li><a href="#lua-runtime-features" class="table-of-contents__link toc-highlight">Lua Runtime Features</a><ul><li><a href="#puc-lua-and-the-luajit-compiler" class="table-of-contents__link toc-highlight">PUC Lua and the LuaJIT Compiler</a></li><li><a href="#lua-versions-and-interoperability" class="table-of-contents__link toc-highlight">Lua Versions and Interoperability</a></li><li><a href="#foreign-function-interface" class="table-of-contents__link toc-highlight">Foreign Function Interface</a></li><li><a href="#extended-standard-library" class="table-of-contents__link toc-highlight">Extended Standard Library</a></li></ul></li><li><a href="#asynchronous-execution-model" class="table-of-contents__link toc-highlight">Asynchronous Execution Model</a><ul><li><a href="#enter-the-event-loop" class="table-of-contents__link toc-highlight">Enter the Event Loop</a></li><li><a href="#events-and-callbacks" class="table-of-contents__link toc-highlight">Events and Callbacks</a></li><li><a href="#threads-and-coroutines" class="table-of-contents__link toc-highlight">Threads and Coroutines</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021-2025 · Evo.lua authors and contributors</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1c0fc164.js"></script>
<script src="/assets/js/main.f5c2afea.js"></script>
</body>
</html>